version: "3.9"

services:
  api:
    build:
      context: './backend'
      dockerfile: Dockerfile
    container_name: 'ws-api'
    environment:
      NODE_ENV: production
      PORT: 8080
      HOST: 0.0.0.0
    ports:
      - '8080:8080'
    restart: unless-stopped

  web:
    build:
      context: './frontend'
      dockerfile: Dockerfile
    container_name: 'next-web'
    environment:
      NODE_ENV: production
      PORT: 3000
      HOSTNAME: 0.0.0.0
      NEXT_PUBLIC_WS_URL: 'ws://api:8080'
    ports:
      - '3000:3000'
    depends_on:
      - 'api'
networks:
  default:
    name: app-net

